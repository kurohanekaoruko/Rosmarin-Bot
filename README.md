# Rosmarin-Bot / 迷迭香Bot

![language-typescript](https://img.shields.io/badge/language-typescript-3178c6)


这是一个用于游戏 [Screeps](https://screeps.com/) 的半自动Bot, 代码由TypeScript组成。代码不算强大，只勉强实现了基本的半自动运营。

本bot不同于全自动bot, 其功能需要手动设置相关参数才能开始运行, 因此大部分功能可自定义调整参数。

例如lab、factory的自动合成阈值, market的买卖资源阈值与价格限制等。

## 功能

- **基本房间运营**
    - 常驻Creep的自动孵化
    - 能量与资源的填充
    - 能量矿与元素矿的自动采集
    - 自动升级、自动建造、自动维修
    - 根据预设布局放置工地
- **任务模块**
    - 使用任务池来管理Creep所进行的工作
    - 目前使用了任务模块的有：搬运、建造、维修、孵化。
- **外矿采集**
    - 从外部房间进行自动能量采集, 也支持中央九房。
    - 使用指令添加相邻的无主房间为外矿, 即可全自动的进行采集搬运
- **过道采集**
    - 自动监控并采集过道房间的 PowerBank 和 Deposit。
    - 通过指令添加监控的过道房间, 当发现满足条件的目标时将会自动排除采集队伍
    - 可单独开关power和deposit的采集
- **LAB合成**
    - 自动化的化合物合成, 以及由任务控制的 Boost。
    - 预设有对常用化合物的合成方案, 资源量满足条件将会自动合成。
    - 也可通过指令添加自定义的合成方案, 可设定触发阈值和限额。
- **工厂生产**: 自动化的商品生产, 搭配资源管理可以实现多级商品供应链。
- **资源管理**: 根据设置的阈值来自动转移各个房间的资源。
- **市场交易**: 自动化的资源买卖, 包括自动挂单和自动Deal。
- **四人小队**: 同时控制最多四个Creep行动的战斗模块。


## 使用方法

详细功能在控制台输入 `help` 查看


## 安装

1. 安装依赖

    ```bash
    npm install
    ```

2. 配置

    创建 `.secret.json` 文件，并添加以下内容：

    ```json
    {
        "main": {
            "token": "这里是token",
            "protocol": "https",
            "hostname": "screeps.com",
            "port": 443,
            "path": "/",
            "branch": "main"
        },
        "local": {
            "copyPath": "游戏客户端放代码的本地路径"
        }
    }
    ```

3. 构建

    ```bash
    npm run build
    ```

    生成的 js 文件在 `dist` 目录下

4. 构建并提交代码

    ```bash
    npm run push
    ```

    注意, 这将会覆盖 `main` 分支的代码。

    在游戏内切换到 `main` 分支即可开始运行。如果切换分支后报错，那么就再执行一次 `npm run push`。


